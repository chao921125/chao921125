!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("babylonjs")):"function"==typeof define&&define.amd?define("babylonjs-serializers",["babylonjs"],t):"object"==typeof exports?exports["babylonjs-serializers"]=t(require("babylonjs")):e.SERIALIZERS=t(e.BABYLON)}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this,(e=>(()=>{"use strict";var t={520:t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{o.d(n,{default:()=>s});var e={};o.r(e),o.d(e,{STLExport:()=>i});var t={};o.r(t),o.d(t,{STLExport:()=>i});var r=o(520),i=function(){function e(){}return e.CreateSTL=function(e,t,o,n,i,a){void 0===t&&(t=!0),void 0===o&&(o="stlmesh"),void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===a&&(a=!1);var f,s=function(e,t,o){var n=[3*e[o],3*e[o+1],3*e[o+2]],i=[new r.Vector3(t[n[0]],t[n[0]+2],t[n[0]+1]),new r.Vector3(t[n[1]],t[n[1]+2],t[n[1]+1]),new r.Vector3(t[n[2]],t[n[2]+2],t[n[2]+1])],a=i[0].subtract(i[1]),f=i[2].subtract(i[1]);return{v:i,n:r.Vector3.Cross(f,a).normalize()}},l=function(e,t,r,o){return t=d(e,t,r.x,o),t=d(e,t,r.y,o),d(e,t,r.z,o)},d=function(e,t,r,o){return e.setFloat32(t,r,o),t+4},u=0,c=0;if(n){for(var v=0;v<e.length;v++)u+=(w=(p=e[v]).getIndices())?w.length/3:0;var b=new ArrayBuffer(84+50*u);c+=80,(f=new DataView(b)).setUint32(c,u,i),c+=4}else f="solid stlmesh\r\n";for(v=0;v<e.length;v++){var p=e[v];a||p.bakeCurrentTransformIntoVertices();for(var y=p.getVerticesData(r.VertexBuffer.PositionKind)||[],w=p.getIndices()||[],x=0;x<w.length;x+=3){var g=s(w,y,x);n?(c=l(f,c,g.n,i),c=l(f,c,g.v[0],i),c=l(f,c,g.v[1],i),c=l(f,c,g.v[2],i),c+=2):(f+="facet normal "+g.n.x+" "+g.n.y+" "+g.n.z+"\r\n",f+="\touter loop\r\n",f+="\t\tvertex "+g.v[0].x+" "+g.v[0].y+" "+g.v[0].z+"\r\n",f+="\t\tvertex "+g.v[1].x+" "+g.v[1].y+" "+g.v[1].z+"\r\n",f+="\t\tvertex "+g.v[2].x+" "+g.v[2].y+" "+g.v[2].z+"\r\n",f+="\tendloop\r\n",f+="endfacet\r\n")}}if(n||(f+="endsolid stlmesh"),t){var m=document.createElement("a"),h=new Blob([f],{type:"application/octet-stream"});m.href=window.URL.createObjectURL(h),m.download=o+".stl",m.click()}return f},e}(),a=void 0!==o.g?o.g:"undefined"!=typeof window?window:void 0;if(void 0!==a)for(var f in e)a.BABYLON[f]=e[f];const s=t})(),n.default})()));
//# sourceMappingURL=babylon.stlSerializer.min.js.map