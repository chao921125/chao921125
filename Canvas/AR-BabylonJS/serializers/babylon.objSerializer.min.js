!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("babylonjs")):"function"==typeof define&&define.amd?define("babylonjs-serializers",["babylonjs"],t):"object"==typeof exports?exports["babylonjs-serializers"]=t(require("babylonjs")):e.SERIALIZERS=t(e.BABYLON)}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this,(e=>(()=>{"use strict";var t={520:t=>{t.exports=e}},o={};function r(e){var i=o[e];if(void 0!==i)return i.exports;var n=o[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{r.d(i,{default:()=>a});var e={};r.r(e),r.d(e,{OBJExport:()=>n});var t={};r.r(t),r.d(t,{OBJExport:()=>n});var o=r(520),n=function(){function e(){}return e.OBJ=function(e,t,r,i){var n=[],s=1,u=1;t&&(r||(r="mat"),n.push("mtllib "+r+".mtl"));for(var a=0;a<e.length;a++){n.push("g object"+a),n.push("o object_"+a);var l=null;if(i){var p=e[a].computeWorldMatrix(!0);l=new o.Matrix,p.invertToRef(l),e[a].bakeTransformIntoVertices(p)}if(t){var f=e[a].material;f&&n.push("usemtl "+f.id)}var d=e[a].geometry;if(d){var m=d.getVerticesData("position"),h=d.getVerticesData("normal"),b=d.getVerticesData("uv"),c=d.getIndices(),x=0,g=0;if(m&&c){for(var v=0;v<m.length;v+=3)e[0].getScene().useRightHandedSystem?n.push("v "+m[v]+" "+m[v+1]+" "+m[v+2]):n.push("v "+m[v]+" "+m[v+1]+" "+-m[v+2]),x++;if(null!=h)for(v=0;v<h.length;v+=3)n.push("vn "+h[v]+" "+h[v+1]+" "+h[v+2]);if(null!=b)for(v=0;v<b.length;v+=2)n.push("vt "+b[v]+" "+b[v+1]),g++;for(v=0;v<c.length;v+=3){var y=[String(c[v+2]+s),String(c[v+1]+s),String(c[v]+s)],T=[String(c[v+2]+u),String(c[v+1]+u),String(c[v]+u)],j=["","",""],F=y,S=null!=b?T:j,w=null!=h?y:j;n.push("f "+F[0]+"/"+S[0]+"/"+w[0]+" "+F[1]+"/"+S[1]+"/"+w[1]+" "+F[2]+"/"+S[2]+"/"+w[2])}i&&l&&e[a].bakeTransformIntoVertices(l),s+=x,u+=g}else o.Tools.Warn("There are no position vertices or indices on the mesh!")}else o.Tools.Warn("No geometry is present on the mesh")}return n.join("\n")},e.MTL=function(e){var t=[],o=e.material;return t.push("newmtl mat1"),t.push("  Ns "+o.specularPower.toFixed(4)),t.push("  Ni 1.5000"),t.push("  d "+o.alpha.toFixed(4)),t.push("  Tr 0.0000"),t.push("  Tf 1.0000 1.0000 1.0000"),t.push("  illum 2"),t.push("  Ka "+o.ambientColor.r.toFixed(4)+" "+o.ambientColor.g.toFixed(4)+" "+o.ambientColor.b.toFixed(4)),t.push("  Kd "+o.diffuseColor.r.toFixed(4)+" "+o.diffuseColor.g.toFixed(4)+" "+o.diffuseColor.b.toFixed(4)),t.push("  Ks "+o.specularColor.r.toFixed(4)+" "+o.specularColor.g.toFixed(4)+" "+o.specularColor.b.toFixed(4)),t.push("  Ke "+o.emissiveColor.r.toFixed(4)+" "+o.emissiveColor.g.toFixed(4)+" "+o.emissiveColor.b.toFixed(4)),o.ambientTexture&&t.push("  map_Ka "+o.ambientTexture.name),o.diffuseTexture&&t.push("  map_Kd "+o.diffuseTexture.name),o.specularTexture&&t.push("  map_Ks "+o.specularTexture.name),o.bumpTexture&&t.push("  map_bump -imfchan z "+o.bumpTexture.name),o.opacityTexture&&t.push("  map_d "+o.opacityTexture.name),t.join("\n")},e}(),s=void 0!==r.g?r.g:"undefined"!=typeof window?window:void 0;if(void 0!==s)for(var u in e)s.BABYLON[u]=e[u];const a=t})(),i.default})()));
//# sourceMappingURL=babylon.objSerializer.min.js.map