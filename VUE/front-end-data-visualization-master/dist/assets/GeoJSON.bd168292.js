import{F as O,a as _}from"./Vector.c1a6c122.js";import{R as P,Q as j,E as F,b8 as w,b9 as T,G as N,ar as u,J as E,ba as S,_ as l,a4 as b,a0 as M,f as d,a as p,d as C,aU as L,bb as I,bc as x}from"./ol.bb58850a.js";import{L as R}from"./LineString.191ddcd6.js";import{M as k,a as J,b as A}from"./MultiPolygon.abfd4d82.js";var U=globalThis&&globalThis.__extends||function(){var n=function(r,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])},n(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Y=function(n){U(r,n);function r(e){var t=n.call(this)||this;return t.geometries_=e||null,t.changeEventsKeys_=[],t.listenGeometriesChange_(),t}return r.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(P),this.changeEventsKeys_.length=0},r.prototype.listenGeometriesChange_=function(){if(!!this.geometries_)for(var e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(j(this.geometries_[e],F.CHANGE,this.changed,this))},r.prototype.clone=function(){var e=new r(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e},r.prototype.closestPointXY=function(e,t,o,i){if(i<w(this.getExtent(),e,t))return i;for(var a=this.geometries_,s=0,c=a.length;s<c;++s)i=a[s].closestPointXY(e,t,o,i);return i},r.prototype.containsXY=function(e,t){for(var o=this.geometries_,i=0,a=o.length;i<a;++i)if(o[i].containsXY(e,t))return!0;return!1},r.prototype.computeExtent=function(e){T(e);for(var t=this.geometries_,o=0,i=t.length;o<i;++o)N(e,t[o].getExtent());return e},r.prototype.getGeometries=function(){return v(this.geometries_)},r.prototype.getGeometriesArray=function(){return this.geometries_},r.prototype.getGeometriesArrayRecursive=function(){for(var e=[],t=this.geometries_,o=0,i=t.length;o<i;++o)t[o].getType()===this.getType()?e=e.concat(t[o].getGeometriesArrayRecursive()):e.push(t[o]);return e},r.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var t=[],o=this.geometries_,i=!1,a=0,s=o.length;a<s;++a){var c=o[a],f=c.getSimplifiedGeometry(e);t.push(f),f!==c&&(i=!0)}if(i){var y=new r(null);return y.setGeometriesArray(t),y}else return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},r.prototype.getType=function(){return u.GEOMETRY_COLLECTION},r.prototype.intersectsExtent=function(e){for(var t=this.geometries_,o=0,i=t.length;o<i;++o)if(t[o].intersectsExtent(e))return!0;return!1},r.prototype.isEmpty=function(){return this.geometries_.length===0},r.prototype.rotate=function(e,t){for(var o=this.geometries_,i=0,a=o.length;i<a;++i)o[i].rotate(e,t);this.changed()},r.prototype.scale=function(e,t,o){var i=o;i||(i=E(this.getExtent()));for(var a=this.geometries_,s=0,c=a.length;s<c;++s)a[s].scale(e,t,i);this.changed()},r.prototype.setGeometries=function(e){this.setGeometriesArray(v(e))},r.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},r.prototype.applyTransform=function(e){for(var t=this.geometries_,o=0,i=t.length;o<i;++o)t[o].applyTransform(e);this.changed()},r.prototype.translate=function(e,t){for(var o=this.geometries_,i=0,a=o.length;i<a;++i)o[i].translate(e,t);this.changed()},r.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),n.prototype.disposeInternal.call(this)},r}(S);function v(n){for(var r=[],e=0,t=n.length;e<t;++e)r.push(n[e].clone());return r}var X=Y,K=function(){function n(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return n.prototype.getReadOptions=function(r,e){var t;if(e){var o=e.dataProjection?l(e.dataProjection):this.readProjection(r);e.extent&&o&&o.getUnits()===M.TILE_PIXELS&&(o=l(o),o.setWorldExtent(e.extent)),t={dataProjection:o,featureProjection:e.featureProjection}}return this.adaptOptions(t)},n.prototype.adaptOptions=function(r){return d({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},r)},n.prototype.getType=function(){return p()},n.prototype.readFeature=function(r,e){return p()},n.prototype.readFeatures=function(r,e){return p()},n.prototype.readGeometry=function(r,e){return p()},n.prototype.readProjection=function(r){return p()},n.prototype.writeFeature=function(r,e){return p()},n.prototype.writeFeatures=function(r,e){return p()},n.prototype.writeGeometry=function(r,e){return p()},n}();function G(n,r,e){var t=e?l(e.featureProjection):null,o=e?l(e.dataProjection):null,i;if(t&&o&&!b(t,o)?i=(r?n.clone():n).transform(r?t:o,r?o:t):i=n,r&&e&&e.decimals!==void 0){var a=Math.pow(10,e.decimals),s=function(c){for(var f=0,y=c.length;f<y;++f)c[f]=Math.round(c[f]*a)/a;return c};i===n&&(i=n.clone()),i.applyTransform(s)}return i}var $=globalThis&&globalThis.__extends||function(){var n=function(r,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])},n(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),H=function(n){$(r,n);function r(){return n.call(this)||this}return r.prototype.getType=function(){return O.JSON},r.prototype.readFeature=function(e,t){return this.readFeatureFromObject(m(e),this.getReadOptions(e,t))},r.prototype.readFeatures=function(e,t){return this.readFeaturesFromObject(m(e),this.getReadOptions(e,t))},r.prototype.readFeatureFromObject=function(e,t){return p()},r.prototype.readFeaturesFromObject=function(e,t){return p()},r.prototype.readGeometry=function(e,t){return this.readGeometryFromObject(m(e),this.getReadOptions(e,t))},r.prototype.readGeometryFromObject=function(e,t){return p()},r.prototype.readProjection=function(e){return this.readProjectionFromObject(m(e))},r.prototype.readProjectionFromObject=function(e){return p()},r.prototype.writeFeature=function(e,t){return JSON.stringify(this.writeFeatureObject(e,t))},r.prototype.writeFeatureObject=function(e,t){return p()},r.prototype.writeFeatures=function(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))},r.prototype.writeFeaturesObject=function(e,t){return p()},r.prototype.writeGeometry=function(e,t){return JSON.stringify(this.writeGeometryObject(e,t))},r.prototype.writeGeometryObject=function(e,t){return p()},r}(K);function m(n){if(typeof n=="string"){var r=JSON.parse(n);return r||null}else return n!==null?n:null}var W=H,B=globalThis&&globalThis.__extends||function(){var n=function(r,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])},n(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Q=function(n){B(r,n);function r(e){var t=this,o=e||{};return t=n.call(this)||this,t.dataProjection=l(o.dataProjection?o.dataProjection:"EPSG:4326"),o.featureProjection&&(t.defaultFeatureProjection=l(o.featureProjection)),t.geometryName_=o.geometryName,t.extractGeometryName_=o.extractGeometryName,t.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],t}return r.prototype.readFeatureFromObject=function(e,t){var o=null;e.type==="Feature"?o=e:o={type:"Feature",geometry:e,properties:null};var i=h(o.geometry,t),a=new _;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in o!==void 0&&a.setGeometryName(o.geometry_name),a.setGeometry(i),"id"in o&&a.setId(o.id),o.properties&&a.setProperties(o.properties,!0),a},r.prototype.readFeaturesFromObject=function(e,t){var o=e,i=null;if(o.type==="FeatureCollection"){var a=e;i=[];for(var s=a.features,c=0,f=s.length;c<f;++c)i.push(this.readFeatureFromObject(s[c],t))}else i=[this.readFeatureFromObject(e,t)];return i},r.prototype.readGeometryFromObject=function(e,t){return h(e,t)},r.prototype.readProjectionFromObject=function(e){var t=e.crs,o;return t?t.type=="name"?o=l(t.properties.name):t.type==="EPSG"?o=l("EPSG:"+t.properties.code):C(!1,36):o=this.dataProjection,o},r.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var o={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(o.id=i),!e.hasProperties())return o;var a=e.getProperties(),s=e.getGeometry();return s&&(o.geometry=g(s,t),delete a[e.getGeometryName()]),L(a)||(o.properties=a),o},r.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);for(var o=[],i=0,a=e.length;i<a;++i)o.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:o}},r.prototype.writeGeometryObject=function(e,t){return g(e,this.adaptOptions(t))},r}(W);function h(n,r){if(!n)return null;var e;switch(n.type){case u.POINT:{e=z(n);break}case u.LINE_STRING:{e=Z(n);break}case u.POLYGON:{e=te(n);break}case u.MULTI_POINT:{e=D(n);break}case u.MULTI_LINE_STRING:{e=q(n);break}case u.MULTI_POLYGON:{e=ee(n);break}case u.GEOMETRY_COLLECTION:{e=V(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return G(e,!1,r)}function V(n,r){var e=n.geometries.map(function(t){return h(t,r)});return new X(e)}function z(n){return new x(n.coordinates)}function Z(n){return new R(n.coordinates)}function q(n){return new J(n.coordinates)}function D(n){return new A(n.coordinates)}function ee(n){return new k(n.coordinates)}function te(n){return new I(n.coordinates)}function g(n,r){n=G(n,!0,r);var e=n.getType(),t;switch(e){case u.POINT:{t=se(n);break}case u.LINE_STRING:{t=oe(n);break}case u.POLYGON:{t=ue(n,r);break}case u.MULTI_POINT:{t=ie(n);break}case u.MULTI_LINE_STRING:{t=ne(n);break}case u.MULTI_POLYGON:{t=ae(n,r);break}case u.GEOMETRY_COLLECTION:{t=re(n,r);break}case u.CIRCLE:{t={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return t}function re(n,r){var e=n.getGeometriesArray().map(function(t){var o=d({},r);return delete o.featureProjection,g(t,o)});return{type:"GeometryCollection",geometries:e}}function oe(n,r){return{type:"LineString",coordinates:n.getCoordinates()}}function ne(n,r){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function ie(n,r){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function ae(n,r){var e;return r&&(e=r.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(e)}}function se(n,r){return{type:"Point",coordinates:n.getCoordinates()}}function ue(n,r){var e;return r&&(e=r.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(e)}}var ye=Q;export{ye as G};
