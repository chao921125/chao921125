import{A as C,b as g,C as h,r as p,o as w,e as k,a as u,u as M,S as P,w as B,f as E}from"./vendor.b99b632f.js";import{f}from"./fabric.49791ffe.js";const S=E("canvas",{id:"canvas",width:"600",height:"600",style:{border:"1px solid #ccc"}},null,-1),F={setup(V){const d=C();let e=null,t=null,c=null,l=null,s=g("default");function b(o){switch(o){case"default":e.selection=!0,e.selectionColor="rgba(100, 100, 255, 0.3)",e.selectionBorderColor="rgba(255, 255, 255, 0.3)",e.skipTargetFind=!1;break;case"ellipse":e.selectionColor="transparent",e.selectionBorderColor="transparent",e.skipTargetFind=!0;break}}function m(){e=new f.fabric.Canvas("canvas"),e.on("mouse:down",v),e.on("mouse:move",y),e.on("mouse:up",x)}function v(o){t=o.absolutePointer,s.value==="ellipse"&&(l=new f.fabric.Ellipse({top:t.y,left:t.x,rx:0,ry:0,fill:"transparent",stroke:"rgba(0, 0, 0, 0.2)"}),e.add(l))}function y(o){if(s.value==="ellipse"&&l){const n=o.absolutePointer;let a=Math.abs(t.x-n.x)/2,r=Math.abs(t.y-n.y)/2,i=n.y>t.y?t.y:t.y-r*2,_=n.x>t.x?t.x:t.x-a*2;l.set("rx",a),l.set("ry",r),l.set("top",i),l.set("left",_),e.requestRenderAll()}}function x(o){c=o.absolutePointer,s.value==="ellipse"&&(JSON.stringify(t)===JSON.stringify(c)?e.remove(l):l.set("stroke","#000"),l=null)}return h(()=>{d.commit("setComponentPath","src/views/FabricJS/Demo/pages/CreateEllipse/CreateEllipse.vue"),m()}),(o,n)=>{const a=p("el-option"),r=p("el-select");return w(),k("div",null,[u(r,{modelValue:M(s),"onUpdate:modelValue":n[0]||(n[0]=i=>P(s)?s.value=i:s=i),onChange:b},{default:B(()=>[u(a,{label:"\u9ED8\u8BA4(\u6846\u9009)",value:"default"}),u(a,{label:"\u692D\u5706\u5F62",value:"ellipse"})]),_:1},8,["modelValue"]),S])}}};export{F as default};
