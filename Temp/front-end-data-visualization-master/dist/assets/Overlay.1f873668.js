import{a8 as P,a9 as v,aa as y,R as C,Q as _,ab as N,ac as I,ad as R,ae as M,af as S}from"./ol.bb58850a.js";var s={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},L=globalThis&&globalThis.__extends||function(){var l=function(n,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])},l(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");l(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),o={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},F=function(l){L(n,l);function n(e){var t=l.call(this)||this;t.on,t.once,t.un,t.options=e,t.id=e.id,t.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,t.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,t.element=document.createElement("div"),t.element.className=e.className!==void 0?e.className:"ol-overlay-container "+P,t.element.style.position="absolute",t.element.style.pointerEvents="auto";var i=e.autoPan;return i&&typeof i!="object"&&(i={animation:e.autoPanAnimation,margin:e.autoPanMargin}),t.autoPan=i||!1,t.rendered={transform_:"",visible:!0},t.mapPostrenderListenerKey=null,t.addChangeListener(o.ELEMENT,t.handleElementChanged),t.addChangeListener(o.MAP,t.handleMapChanged),t.addChangeListener(o.OFFSET,t.handleOffsetChanged),t.addChangeListener(o.POSITION,t.handlePositionChanged),t.addChangeListener(o.POSITIONING,t.handlePositioningChanged),e.element!==void 0&&t.setElement(e.element),t.setOffset(e.offset!==void 0?e.offset:[0,0]),t.setPositioning(e.positioning!==void 0?e.positioning:s.TOP_LEFT),e.position!==void 0&&t.setPosition(e.position),t}return n.prototype.getElement=function(){return this.get(o.ELEMENT)},n.prototype.getId=function(){return this.id},n.prototype.getMap=function(){return this.get(o.MAP)},n.prototype.getOffset=function(){return this.get(o.OFFSET)},n.prototype.getPosition=function(){return this.get(o.POSITION)},n.prototype.getPositioning=function(){return this.get(o.POSITIONING)},n.prototype.handleElementChanged=function(){v(this.element);var e=this.getElement();e&&this.element.appendChild(e)},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(y(this.element),C(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=_(e,N.POSTRENDER,this.render,this),this.updatePixelPosition();var t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}},n.prototype.render=function(){this.updatePixelPosition()},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},n.prototype.setElement=function(e){this.set(o.ELEMENT,e)},n.prototype.setMap=function(e){this.set(o.MAP,e)},n.prototype.setOffset=function(e){this.set(o.OFFSET,e)},n.prototype.setPosition=function(e){this.set(o.POSITION,e)},n.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},n.prototype.panIntoView=function(e){var t=this.getMap();if(!(!t||!t.getTargetElement()||!this.get(o.POSITION))){var i=this.getRect(t.getTargetElement(),t.getSize()),a=this.getElement(),r=this.getRect(a,[I(a),R(a)]),g=e||{},h=g.margin===void 0?20:g.margin;if(!M(i,r)){var d=r[0]-i[0],u=i[2]-r[2],f=r[1]-i[1],T=i[3]-r[3],p=[0,0];if(d<0?p[0]=d-h:u<0&&(p[0]=Math.abs(u)+h),f<0?p[1]=f-h:T<0&&(p[1]=Math.abs(T)+h),p[0]!==0||p[1]!==0){var O=t.getView().getCenterInternal(),E=t.getPixelFromCoordinateInternal(O);if(!E)return;var c=[E[0]+p[0],E[1]+p[1]],m=g.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(c),duration:m.duration,easing:m.easing})}}}},n.prototype.getRect=function(e,t){var i=e.getBoundingClientRect(),a=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[a,r,a+t[0],r+t[1]]},n.prototype.setPositioning=function(e){this.set(o.POSITIONING,e)},n.prototype.setVisible=function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)},n.prototype.updatePixelPosition=function(){var e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}var i=e.getPixelFromCoordinate(t),a=e.getSize();this.updateRenderedPosition(i,a)},n.prototype.updateRenderedPosition=function(e,t){var i=this.element.style,a=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var g=Math.round(e[0]+a[0])+"px",h=Math.round(e[1]+a[1])+"px",d="0%",u="0%";r==s.BOTTOM_RIGHT||r==s.CENTER_RIGHT||r==s.TOP_RIGHT?d="-100%":(r==s.BOTTOM_CENTER||r==s.CENTER_CENTER||r==s.TOP_CENTER)&&(d="-50%"),r==s.BOTTOM_LEFT||r==s.BOTTOM_CENTER||r==s.BOTTOM_RIGHT?u="-100%":(r==s.CENTER_LEFT||r==s.CENTER_CENTER||r==s.CENTER_RIGHT)&&(u="-50%");var f="translate("+d+", "+u+") translate("+g+", "+h+")";this.rendered.transform_!=f&&(this.rendered.transform_=f,i.transform=f,i.msTransform=f)},n.prototype.getOptions=function(){return this.options},n}(S),b=F;export{b as O,s as a};
