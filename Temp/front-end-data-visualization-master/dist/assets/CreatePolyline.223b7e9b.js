import{A as x,b as C,C as _,r as u,o as k,e as w,a as i,u as B,S as M,w as V,f as A}from"./vendor.b99b632f.js";import{f as r}from"./fabric.49791ffe.js";const R=A("canvas",{id:"canvas",width:"600",height:"600",style:{border:"1px solid #ccc"}},null,-1),D={setup(T){const p=x();let e=null,l=null,a=C("default");function f(n){switch(n){case"default":e.selection=!0,e.selectionColor="rgba(100, 100, 255, 0.3)",e.selectionBorderColor="rgba(255, 255, 255, 0.3)",e.skipTargetFind=!1;break;case"polyline":e.selectionColor="transparent",e.selectionBorderColor="transparent",e.skipTargetFind=!0;break}}function d(){e=new r.fabric.Canvas("canvas"),e.on("mouse:down",h),e.on("mouse:move",P),e.on("mouse:dblclick",g)}function y(n){const t=n.absolutePointer;l=new r.fabric.Polyline([{x:t.x,y:t.y},{x:t.x,y:t.y}],{fill:"transparent",stroke:"rgba(0, 0, 0, 0.2)",objectCaching:!1}),e.add(l)}function b(n){const t=n.absolutePointer;l.points.push({x:t.x,y:t.y}),e.requestRenderAll()}function m(n){const t=n.absolutePointer;let o=l.points;o[o.length-1].x=t.x,o[o.length-1].y=t.y,e.requestRenderAll()}function v(n){const t=n.absolutePointer;let o=l.points;if(o[o.length-1].x=t.x,o[o.length-1].y=t.y,o.pop(),o.pop(),e.remove(l),o.length>1){let s=new r.fabric.Polyline(o,{stroke:"#000",fill:"transparent"});e.add(s)}l=null,e.requestRenderAll()}function h(n){a.value==="polyline"&&(l===null?y(n):b(n))}function P(n){a.value==="polyline"&&l&&m(n)}function g(n){a.value==="polyline"&&v(n)}return _(()=>{p.commit("setComponentPath","src/views/FabricJS/Demo/pages/CreatePolyline/CreatePolyline.vue"),d()}),(n,t)=>{const o=u("el-option"),s=u("el-select");return k(),w("div",null,[i(s,{modelValue:B(a),"onUpdate:modelValue":t[0]||(t[0]=c=>M(a)?a.value=c:a=c),onChange:f},{default:V(()=>[i(o,{label:"\u9ED8\u8BA4(\u6846\u9009)",value:"default"}),i(o,{label:"\u6298\u7EBF",value:"polyline"})]),_:1},8,["modelValue"]),R])}}};export{D as default};
