import"./echarts.7709889d.js";import{g as wt,h as pt,S as xt,k as St,Z as yt,o as et,n as Tt,z as Mt,A as It,D as Ct,E as lt,F as Et,H as bt,I as kt}from"./index.04f38bd2.js";wt({type:"series.wordCloud",visualStyleAccessPath:"textStyle",visualStyleMapper:function(h){return{fill:h.get("color")}},visualDrawType:"fill",optionUpdated:function(){var h=this.option;h.gridSize=Math.max(Math.floor(h.gridSize),4)},getInitialData:function(h,l){var i=pt(h.data,{coordDimensions:["value"]}),t=new xt(i,this);return t.initData(h.data),t},defaultOption:{maskImage:null,shape:"circle",left:"center",top:"center",width:"70%",height:"80%",sizeRange:[12,60],rotationRange:[-90,90],rotationStep:45,gridSize:8,drawOutOfBound:!1,textStyle:{fontWeight:"normal"}}});St({type:"wordCloud",render:function(h,l,i){var t=this.group;t.removeAll();var f=h.getData(),g=h.get("gridSize");h.layoutInstance.ondraw=function(a,T,O,k){var D=f.getItemModel(O),P=D.getModel("textStyle"),v=new yt({style:et(P),scaleX:1/k.info.mu,scaleY:1/k.info.mu,x:(k.gx+k.info.gw/2)*g,y:(k.gy+k.info.gh/2)*g,rotation:k.rot});v.setStyle({x:k.info.fillTextOffsetX,y:k.info.fillTextOffsetY+T*.5,text:a,verticalAlign:"middle",fill:f.getItemVisual(O,"style").fill,fontSize:T}),t.add(v),f.setItemGraphicEl(O,v),v.ensureState("emphasis").style=et(D.getModel(["emphasis","textStyle"]),{state:"emphasis"}),v.ensureState("blur").style=et(D.getModel(["blur","textStyle"]),{state:"blur"}),Tt(v,D.get(["emphasis","focus"]),D.get(["emphasis","blurScope"])),v.stateTransition={duration:h.get("animation")?h.get(["stateAnimation","duration"]):0,easing:h.get(["stateAnimation","easing"])},v.__highDownDispatcher=!0},this._model=h},remove:function(){this.group.removeAll(),this._model.layoutInstance.dispose()},dispose:function(){this._model.layoutInstance.dispose()}});/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2013 Tim Chien
 * Released under the MIT license
 */window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var i=[void 0],t="zero-timeout-message",f=function(a){var T=i.length;return i.push(a),window.postMessage(t+T.toString(36),"*"),T};return window.addEventListener("message",function(a){if(!(typeof a.data!="string"||a.data.substr(0,t.length)!==t)){a.stopImmediatePropagation();var T=parseInt(a.data.substr(t.length),36);!i[T]||(i[T](),i[T]=void 0)}},!0),window.clearImmediate=function(a){!i[a]||(i[a]=void 0)},f}()||function(i){window.setTimeout(i,0)}}());window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(i){window.clearTimeout(i)}}());var at=function(){var l=document.createElement("canvas");if(!l||!l.getContext)return!1;var i=l.getContext("2d");return!(!i.getImageData||!i.fillText||!Array.prototype.some||!Array.prototype.push)}(),rt=function(){if(!!at){for(var l=document.createElement("canvas").getContext("2d"),i=20,t,f;i;){if(l.font=i.toString(10)+"px sans-serif",l.measureText("\uFF37").width===t&&l.measureText("m").width===f)return i+1;t=l.measureText("\uFF37").width,f=l.measureText("m").width,i--}return 0}}(),Ft=function(l){for(var i,t,f=l.length;f;i=Math.floor(Math.random()*f),t=l[--f],l[f]=l[i],l[i]=t);return l},Z=function(l,i){if(!at)return;Array.isArray(l)||(l=[l]),l.forEach(function(c,e){if(typeof c=="string"){if(l[e]=document.getElementById(c),!l[e])throw"The element id specified is not found."}else if(!c.tagName&&!c.appendChild)throw"You must pass valid HTML elements, or ID of the element."});var t={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "\u5FAE\u8EDF\u6B63\u9ED1\u9AD4", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,layoutAnimation:!0,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationStep:.1,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(i)for(var f in i)f in t&&(t[f]=i[f]);if(typeof t.weightFactor!="function"){var g=t.weightFactor;t.weightFactor=function(e){return e*g}}if(typeof t.shape!="function")switch(t.shape){case"circle":default:t.shape="circle";break;case"cardioid":t.shape=function(e){return 1-Math.sin(e)};break;case"diamond":case"square":t.shape=function(e){var r=e%(2*Math.PI/4);return 1/(Math.cos(r)+Math.sin(r))};break;case"triangle-forward":t.shape=function(e){var r=e%(2*Math.PI/3);return 1/(Math.cos(r)+Math.sqrt(3)*Math.sin(r))};break;case"triangle":case"triangle-upright":t.shape=function(e){var r=(e+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(r)+Math.sqrt(3)*Math.sin(r))};break;case"pentagon":t.shape=function(e){var r=(e+.955)%(2*Math.PI/5);return 1/(Math.cos(r)+.726543*Math.sin(r))};break;case"star":t.shape=function(e){var r=(e+.955)%(2*Math.PI/10);return(e+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-r)+3.07768*Math.sin(2*Math.PI/10-r)):1/(Math.cos(r)+3.07768*Math.sin(r))};break}t.gridSize=Math.max(Math.floor(t.gridSize),4);var a=t.gridSize,T=a-t.maskGapWidth,O=Math.abs(t.maxRotation-t.minRotation),k=Math.min(t.maxRotation,t.minRotation),D=t.rotationStep,P,v,F,C,z,_,G;function it(c,e){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(e-c)+c).toFixed()+"%)"}switch(t.color){case"random-dark":G=function(){return it(10,50)};break;case"random-light":G=function(){return it(50,90)};break;default:typeof t.color=="function"&&(G=t.color);break}var q=null;typeof t.classes=="function"&&(q=t.classes);var N=!1,U=[],V,nt=function(e){var r=e.currentTarget,n=r.getBoundingClientRect(),s,o;e.touches?(s=e.touches[0].clientX,o=e.touches[0].clientY):(s=e.clientX,o=e.clientY);var d=s-n.left,u=o-n.top,p=Math.floor(d*(r.width/n.width||1)/a),S=Math.floor(u*(r.height/n.height||1)/a);return U[p][S]},ot=function(e){var r=nt(e);if(V!==r){if(V=r,!r){t.hover(void 0,void 0,e);return}t.hover(r.item,r.dimension,e)}},j=function(e){var r=nt(e);!r||(t.click(r.item,r.dimension,e),e.preventDefault())},J=[],st=function(e){if(J[e])return J[e];var r=e*8,n=r,s=[];for(e===0&&s.push([C[0],C[1],0]);n--;){var o=1;t.shape!=="circle"&&(o=t.shape(n/r*2*Math.PI)),s.push([C[0]+e*o*Math.cos(-n/r*2*Math.PI),C[1]+e*o*Math.sin(-n/r*2*Math.PI)*t.ellipticity,n/r*2*Math.PI])}return J[e]=s,s},K=function(){return t.abortThreshold>0&&new Date().getTime()-_>t.abortThreshold},ft=function(){return t.rotateRatio===0||Math.random()>t.rotateRatio?0:O===0?k:k+Math.round(Math.random()*O/D)*D},ut=function(e,r,n){var s=t.weightFactor(r);if(s<=t.minSize)return!1;var o=1;s<rt&&(o=function(){for(var tt=2;tt*s<rt;)tt+=2;return tt}());var d=document.createElement("canvas"),u=d.getContext("2d",{willReadFrequently:!0});u.font=t.fontWeight+" "+(s*o).toString(10)+"px "+t.fontFamily;var p=u.measureText(e).width/o,S=Math.max(s*o,u.measureText("m").width,u.measureText("\uFF37").width)/o,x=p+S*2,w=S*3,M=Math.ceil(x/a),E=Math.ceil(w/a);x=M*a,w=E*a;var R=-p/2,y=-S*.4,I=Math.ceil((x*Math.abs(Math.sin(n))+w*Math.abs(Math.cos(n)))/a),b=Math.ceil((x*Math.abs(Math.cos(n))+w*Math.abs(Math.sin(n)))/a),m=b*a,A=I*a;d.setAttribute("width",m),d.setAttribute("height",A),u.scale(1/o,1/o),u.translate(m*o/2,A*o/2),u.rotate(-n),u.font=t.fontWeight+" "+(s*o).toString(10)+"px "+t.fontFamily,u.fillStyle="#000",u.textBaseline="middle",u.fillText(e,R*o,(y+s*.5)*o);var W=u.getImageData(0,0,m,A).data;if(K())return!1;for(var L=[],Y=b,X,Q,$,B=[I/2,b/2,I/2,b/2];Y--;)for(X=I;X--;){$=a;t:for(;$--;)for(Q=a;Q--;)if(W[((X*a+$)*m+(Y*a+Q))*4+3]){L.push([Y,X]),Y<B[3]&&(B[3]=Y),Y>B[1]&&(B[1]=Y),X<B[0]&&(B[0]=X),X>B[2]&&(B[2]=X);break t}}return{mu:o,occupied:L,bounds:B,gw:b,gh:I,fillTextOffsetX:R,fillTextOffsetY:y,fillTextWidth:p,fillTextHeight:S,fontSize:s}},dt=function(e,r,n,s,o){for(var d=o.length;d--;){var u=e+o[d][0],p=r+o[d][1];if(u>=v||p>=F||u<0||p<0){if(!t.drawOutOfBound)return!1;continue}if(!P[u][p])return!1}return!0},ht=function(e,r,n,s,o,d,u,p,S){var x=n.fontSize,w;G?w=G(s,o,x,d,u):w=t.color;var M;q?M=q(s,o,x,d,u):M=t.classes;var E=n.bounds;(e+E[3])*a,(r+E[0])*a,(E[1]-E[3]+1)*a,(E[2]-E[0]+1)*a,l.forEach(function(R){if(R.getContext){var y=R.getContext("2d"),I=n.mu;y.save(),y.scale(1/I,1/I),y.font=t.fontWeight+" "+(x*I).toString(10)+"px "+t.fontFamily,y.fillStyle=w,y.translate((e+n.gw/2)*a*I,(r+n.gh/2)*a*I),p!==0&&y.rotate(-p),y.textBaseline="middle",y.fillText(s,n.fillTextOffsetX*I,(n.fillTextOffsetY+x*.5)*I),y.restore()}else{var b=document.createElement("span"),m="";m="rotate("+-p/Math.PI*180+"deg) ",n.mu!==1&&(m+="translateX(-"+n.fillTextWidth/4+"px) scale("+1/n.mu+")");var A={position:"absolute",display:"block",font:t.fontWeight+" "+x*n.mu+"px "+t.fontFamily,left:(e+n.gw/2)*a+n.fillTextOffsetX+"px",top:(r+n.gh/2)*a+n.fillTextOffsetY+"px",width:n.fillTextWidth+"px",height:n.fillTextHeight+"px",lineHeight:x+"px",whiteSpace:"nowrap",transform:m,webkitTransform:m,msTransform:m,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};w&&(A.color=w),b.textContent=s;for(var W in A)b.style[W]=A[W];if(S)for(var L in S)b.setAttribute(L,S[L]);M&&(b.className+=M),R.appendChild(b)}})},ct=function(e,r,n,s,o){if(!(e>=v||r>=F||e<0||r<0)){if(P[e][r]=!1,n){var d=l[0].getContext("2d");d.fillRect(e*a,r*a,T,T)}N&&(U[e][r]={item:o,dimension:s})}},vt=function(e,r,n,s,o,d){var u=o.occupied,p=t.drawMask,S;p&&(S=l[0].getContext("2d"),S.save(),S.fillStyle=t.maskColor);var x;if(N){var w=o.bounds;x={x:(e+w[3])*a,y:(r+w[0])*a,w:(w[1]-w[3]+1)*a,h:(w[2]-w[0]+1)*a}}for(var M=u.length;M--;){var E=e+u[M][0],R=r+u[M][1];E>=v||R>=F||E<0||R<0||ct(E,R,p,x,d)}p&&S.restore()},gt=function(e){var r,n,s;Array.isArray(e)?(r=e[0],n=e[1]):(r=e.word,n=e.weight,s=e.attributes);var o=ft(),d=ut(r,n,o);if(!d||K())return!1;if(!t.drawOutOfBound){var u=d.bounds;if(u[1]-u[3]+1>v||u[2]-u[0]+1>F)return!1}for(var p=z+1,S=function(E){var R=Math.floor(E[0]-d.gw/2),y=Math.floor(E[1]-d.gh/2),I=d.gw,b=d.gh;return dt(R,y,I,b,d.occupied)?(ht(R,y,d,r,n,z-p,E[2],o,s),vt(R,y,I,b,d,e),{gx:R,gy:y,rot:o,info:d}):!1};p--;){var x=st(z-p);t.shuffle&&(x=[].concat(x),Ft(x));for(var w=0;w<x.length;w++){var M=S(x[w]);if(M)return M}}return null},H=function(e,r,n){if(r)return!l.some(function(s){var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,!0,r,n||{}),!s.dispatchEvent(o)},this);l.forEach(function(s){var o=document.createEvent("CustomEvent");o.initCustomEvent(e,!0,r,n||{}),s.dispatchEvent(o)},this)},mt=function(){var e=l[0];if(e.getContext)v=Math.ceil(e.width/a),F=Math.ceil(e.height/a);else{var r=e.getBoundingClientRect();v=Math.ceil(r.width/a),F=Math.ceil(r.height/a)}if(!!H("wordcloudstart",!0)){C=t.origin?[t.origin[0]/a,t.origin[1]/a]:[v/2,F/2],z=Math.floor(Math.sqrt(v*v+F*F)),P=[];var n,s,o;if(!e.getContext||t.clearCanvas)for(l.forEach(function(m){if(m.getContext){var A=m.getContext("2d");A.fillStyle=t.backgroundColor,A.clearRect(0,0,v*(a+1),F*(a+1)),A.fillRect(0,0,v*(a+1),F*(a+1))}else m.textContent="",m.style.backgroundColor=t.backgroundColor,m.style.position="relative"}),n=v;n--;)for(P[n]=[],s=F;s--;)P[n][s]=!0;else{var d=document.createElement("canvas").getContext("2d");d.fillStyle=t.backgroundColor,d.fillRect(0,0,1,1);var u=d.getImageData(0,0,1,1).data,p=e.getContext("2d").getImageData(0,0,v*a,F*a).data;n=v;for(var S,x;n--;)for(P[n]=[],s=F;s--;){x=a;t:for(;x--;)for(S=a;S--;)for(o=4;o--;)if(p[((s*a+x)*v*a+(n*a+S))*4+o]!==u[o]){P[n][s]=!1;break t}P[n][s]!==!1&&(P[n][s]=!0)}p=d=u=void 0}if(t.hover||t.click){for(N=!0,n=v+1;n--;)U[n]=[];t.hover&&e.addEventListener("mousemove",ot),t.click&&(e.addEventListener("click",j),e.addEventListener("touchstart",j),e.addEventListener("touchend",function(m){m.preventDefault()}),e.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),e.addEventListener("wordcloudstart",function m(){e.removeEventListener("wordcloudstart",m),e.removeEventListener("mousemove",ot),e.removeEventListener("click",j),V=void 0})}o=0;var w,M,E=!0;t.layoutAnimation?t.wait!==0?(w=window.setTimeout,M=window.clearTimeout):(w=window.setImmediate,M=window.clearImmediate):(w=function(m){m()},M=function(){E=!1});var R=function(A,W){l.forEach(function(L){L.addEventListener(A,W)},this)},y=function(A,W){l.forEach(function(L){L.removeEventListener(A,W)},this)},I=function m(){y("wordcloudstart",m),M(b)};R("wordcloudstart",I);var b=(t.layoutAnimation?w:setTimeout)(function m(){if(!!E){if(o>=t.list.length){M(b),H("wordcloudstop",!1),y("wordcloudstart",I);return}_=new Date().getTime();var A=gt(t.list[o]),W=!H("wordclouddrawn",!0,{item:t.list[o],drawn:A});if(K()||W){M(b),t.abort(),H("wordcloudabort",!1),H("wordcloudstop",!1),y("wordcloudstart",I);return}o++,b=w(m,t.wait)}},t.wait)}};mt()};Z.isSupported=at;Z.minFontSize=rt;if(!Z.isSupported)throw new Error("Sorry your browser not support wordCloud");function Rt(h){for(var l=h.getContext("2d"),i=l.getImageData(0,0,h.width,h.height),t=l.createImageData(i),f=0,g=0,a=0;a<i.data.length;a+=4){var T=i.data[a+3];if(T>128){var O=i.data[a]+i.data[a+1]+i.data[a+2];f+=O,++g}}for(var k=f/g,a=0;a<i.data.length;a+=4){var O=i.data[a]+i.data[a+1]+i.data[a+2],T=i.data[a+3];T<128||O>k?(t.data[a]=0,t.data[a+1]=0,t.data[a+2]=0,t.data[a+3]=0):(t.data[a]=255,t.data[a+1]=255,t.data[a+2]=255,t.data[a+3]=255)}l.putImageData(t,0,0)}Mt(function(h,l){h.eachSeriesByType("wordCloud",function(i){var t=Et(i.getBoxLayoutParams(),{width:l.getWidth(),height:l.getHeight()}),f=i.getData(),g=document.createElement("canvas");g.width=t.width,g.height=t.height;var a=g.getContext("2d"),T=i.get("maskImage");if(T)try{a.drawImage(T,0,0,g.width,g.height),Rt(g)}catch(C){console.error("Invalid mask image"),console.error(C.toString())}var O=i.get("sizeRange"),k=i.get("rotationRange"),D=f.getDataExtent("value"),P=Math.PI/180,v=i.get("gridSize");Z(g,{list:f.mapArray("value",function(C,z){var _=f.getItemModel(z);return[f.getName(z),_.get("textStyle.fontSize",!0)||bt(C,D,O),z]}).sort(function(C,z){return z[1]-C[1]}),fontFamily:i.get("textStyle.fontFamily")||i.get("emphasis.textStyle.fontFamily")||h.get("textStyle.fontFamily"),fontWeight:i.get("textStyle.fontWeight")||i.get("emphasis.textStyle.fontWeight")||h.get("textStyle.fontWeight"),gridSize:v,ellipticity:t.height/t.width,minRotation:k[0]*P,maxRotation:k[1]*P,clearCanvas:!T,rotateRatio:1,rotationStep:i.get("rotationStep")*P,drawOutOfBound:i.get("drawOutOfBound"),layoutAnimation:i.get("layoutAnimation"),shuffle:!1,shape:i.get("shape")});function F(C){var z=C.detail.item;C.detail.drawn&&i.layoutInstance.ondraw&&(C.detail.drawn.gx+=t.x/v,C.detail.drawn.gy+=t.y/v,i.layoutInstance.ondraw(z[0],z[1],z[2],C.detail.drawn))}g.addEventListener("wordclouddrawn",F),i.layoutInstance&&i.layoutInstance.dispose(),i.layoutInstance={ondraw:null,dispose:function(){g.removeEventListener("wordclouddrawn",F),g.addEventListener("wordclouddrawn",function(C){C.preventDefault()})}}})});It(function(h){var l=(h||{}).series;!Ct(l)&&(l=l?[l]:[]);var i=["shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];lt(l,function(f){if(f&&f.type==="wordCloud"){var g=f.textStyle||{};t(g.normal),t(g.emphasis)}});function t(f){f&&lt(i,function(g){f.hasOwnProperty(g)&&(f["text"+kt(g)]=f[g])})}});
